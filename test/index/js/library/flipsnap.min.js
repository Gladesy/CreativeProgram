/**
 * flipsnap.js
 *
 * @version  0.6.3
 * @url http://hokaccha.github.com/js-flipsnap/
 *
 * Copyright 2011 PixelGrid, Inc.
 * Licensed under the MIT License:
 * http://www.opensource.org/licenses/mit-license.php
 */
(function(a,b){if(typeof define==="function"&&define.amd){define([],b);}else{if(typeof exports==="object"){module.exports=b();}else{a.Flipsnap=b();}}})(this,function(){var l=document.createElement("div");
var m=["webkit","moz","o","ms"];var o={};var j=b.support={};var q=false;var d=5;var g=55;j.transform3d=r(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);
j.transform=r(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"]);j.transition=r(["transitionProperty","WebkitTransitionProperty","MozTransitionProperty","OTransitionProperty","msTransitionProperty"]);
j.addEventListener="addEventListener" in window;j.mspointer=window.navigator.msPointerEnabled;j.cssAnimation=(j.transform3d||j.transform)&&j.transition;
var h=["touch","mouse"];var a={start:{touch:"touchstart",mouse:"mousedown"},move:{touch:"touchmove",mouse:"mousemove"},end:{touch:"touchend",mouse:"mouseup"}};
if(j.addEventListener){document.addEventListener("gesturestart",function(){q=true;});document.addEventListener("gestureend",function(){q=false;});}function b(s,t){return(this instanceof b)?this.init(s,t):new b(s,t);
}b.prototype.init=function(t,u){var s=this;s.element=t;if(typeof t==="string"){s.element=document.querySelector(t);}if(!s.element){throw new Error("element not found");
}if(j.mspointer){s.element.style.msTouchAction="pan-y";}u=u||{};s.distance=u.distance;s.maxPoint=u.maxPoint;s.disableTouch=(u.disableTouch===undefined)?false:u.disableTouch;
s.disable3d=(u.disable3d===undefined)?false:u.disable3d;s.disable3d=true;s.transitionDuration=(u.transitionDuration===undefined)?"350ms":u.transitionDuration+"ms";
s.threshold=u.threshold||0;s.currentPoint=0;s.currentX=0;s.animation=false;s.timerId=null;s.use3d=j.transform3d;if(s.disable3d===true){s.use3d=false;}if(j.cssAnimation){s._setStyle({transitionProperty:p("transform"),transitionTimingFunction:"cubic-bezier(0,0,0.25,1)",transitionDuration:"0ms",transform:s._getTranslate(0)});
}else{s._setStyle({position:"relative",left:"0px"});}s.refresh();h.forEach(function(v){s.element.addEventListener(a.start[v],s,false);});return s;};b.prototype.handleEvent=function(t){var s=this;
switch(t.type){case a.start.touch:s._touchStart(t,"touch");break;case a.start.mouse:s._touchStart(t,"mouse");break;case a.move.touch:s._touchMove(t,"touch");
break;case a.move.mouse:s._touchMove(t,"mouse");break;case a.end.touch:s._touchEnd(t,"touch");break;case a.end.mouse:s._touchEnd(t,"mouse");break;case"click":s._click(t);
break;}};b.prototype.refresh=function(){var s=this;s._maxPoint=(s.maxPoint===undefined)?(function(){var x=s.element.childNodes,v=-1,u=0,t=x.length,w;for(;
u<t;u++){w=x[u];if(w.nodeType===1){v++;}}return v;})():s.maxPoint;if(s.distance===undefined){if(s._maxPoint<0){s._distance=0;}else{s._distance=s.element.scrollWidth/(s._maxPoint+1);
}}else{s._distance=s.distance;}s._maxX=-s._distance*s._maxPoint;s.moveToPoint();};b.prototype.hasNext=function(){var s=this;return s.currentPoint<s._maxPoint;
};b.prototype.hasPrev=function(){var s=this;return s.currentPoint>0;};b.prototype.toNext=function(s){var t=this;if(!t.hasNext()){return;}t.moveToPoint(t.currentPoint+1,s);
};b.prototype.toPrev=function(s){var t=this;if(!t.hasPrev()){return;}t.moveToPoint(t.currentPoint-1,s);};b.prototype.moveToPoint=function(t,s){var u=this;
s=s===undefined?u.transitionDuration:s+"ms";var v=u.currentPoint;if(t===undefined){t=u.currentPoint;}if(t<0){u.currentPoint=0;}else{if(t>u._maxPoint){u.currentPoint=u._maxPoint;
}else{u.currentPoint=parseInt(t,10);}}if(j.cssAnimation){u._setStyle({transitionDuration:s});}else{u.animation=true;}u._setX(-u.currentPoint*u._distance,s);
if(v!==u.currentPoint){u._triggerEvent("fsmoveend",true,false);u._triggerEvent("fspointmove",true,false);}};b.prototype._setX=function(t,s){var u=this;
u.currentX=t;if(j.cssAnimation){u.element.style[o.transform]=u._getTranslate(t);}else{if(u.animation){u._animate(t,s||u.transitionDuration);}else{u.element.style.left=t+"px";
}}};b.prototype._touchStart=function(v,u){var s=this;if(s.disableTouch||s.scrolling||q){return;}s.element.addEventListener(a.move[u],s,false);document.addEventListener(a.end[u],s,false);
var t=v.target.tagName;if(u==="mouse"&&t!=="SELECT"&&t!=="INPUT"&&t!=="TEXTAREA"&&t!=="BUTTON"){v.preventDefault();}if(j.cssAnimation){s._setStyle({transitionDuration:"0ms"});
}else{s.animation=false;}s.scrolling=true;s.moveReady=false;s.startPageX=n(v,"pageX");s.startPageY=n(v,"pageY");s.basePageX=s.startPageX;s.directionX=0;
s.startTime=v.timeStamp;s._triggerEvent("fstouchstart",true,false);};b.prototype._touchMove=function(t,y){var A=this;if(!A.scrolling||q){return;}var w=n(t,"pageX");
var v=n(t,"pageY");var z;var s;if(A.moveReady){t.preventDefault();z=w-A.basePageX;s=A.currentX+z;if(s>=0||s<A._maxX){s=Math.round(A.currentX+z/3);}A.directionX=z===0?A.directionX:z>0?-1:1;
var u=!A._triggerEvent("fstouchmove",true,true,{delta:z,direction:A.directionX});if(u){A._touchAfter({moved:false,originalPoint:A.currentPoint,newPoint:A.currentPoint,cancelled:true});
}else{A._setX(s);}}else{var x=i(A.startPageX,A.startPageY,w,v);if(x.z>d){if(f(x)>g){t.preventDefault();A.moveReady=true;A.element.addEventListener("click",A,true);
}else{A.scrolling=false;}}}A.basePageX=w;};b.prototype._touchEnd=function(v,u){var t=this;t.element.removeEventListener(a.move[u],t,false);document.removeEventListener(a.end[u],t,false);
if(!t.scrolling){return;}var s=-t.currentX/t._distance;s=(t.directionX>0)?Math.ceil(s):(t.directionX<0)?Math.floor(s):Math.round(s);if(s<0){s=0;}else{if(s>t._maxPoint){s=t._maxPoint;
}}if(Math.abs(t.startPageX-t.basePageX)<t.threshold){s=t.currentPoint;}t._touchAfter({moved:s!==t.currentPoint,originalPoint:t.currentPoint,newPoint:s,cancelled:false});
t.moveToPoint(s);};b.prototype._click=function(t){var s=this;t.stopPropagation();t.preventDefault();};b.prototype._touchAfter=function(t){var s=this;s.scrolling=false;
s.moveReady=false;setTimeout(function(){s.element.removeEventListener("click",s,true);},200);s._triggerEvent("fstouchend",true,false,t);};b.prototype._setStyle=function(u){var s=this;
var t=s.element.style;for(var v in u){e(t,v,u[v]);}};b.prototype._animate=function(y,v){var B=this;var t=B.element;var s=+new Date();var z=parseInt(t.style.left,10);
var A=y;var u=parseInt(v,10);var w=function(C,x){return -(C/=x)*(C-2);};if(B.timerId){clearInterval(B.timerId);}B.timerId=setInterval(function(){var C=new Date()-s;
var D,x;if(C>u){clearInterval(B.timerId);B.timerId=null;x=A;}else{D=w(C,u);x=D*(A-z)+z;}t.style.left=x+"px";},10);};b.prototype.destroy=function(){var s=this;
h.forEach(function(t){s.element.removeEventListener(a.start[t],s,false);});};b.prototype._getTranslate=function(s){var t=this;return t.use3d?"translate3d("+s+"px, 0, 0)":"translate("+s+"px, 0)";
};b.prototype._triggerEvent=function(v,t,s,x){var u=this;var w=document.createEvent("Event");w.initEvent(v,t,s);if(x){for(var y in x){if(x.hasOwnProperty(y)){w[y]=x[y];
}}}return u.element.dispatchEvent(w);};function n(s,t){return s.changedTouches?s.changedTouches[0][t]:s[t];}function r(s){return k(s,function(t){return l.style[t]!==undefined;
});}function e(t,v,u){var s=o[v];if(s){t[s]=u;}else{if(t[v]!==undefined){o[v]=v;t[v]=u;}else{k(m,function(w){var x=c(w)+c(v);if(t[x]!==undefined){o[v]=x;
t[x]=u;return true;}});}}}function p(t){if(l.style[t]!==undefined){return t;}else{var s;k(m,function(u){var v=c(u)+c(t);if(l.style[v]!==undefined){s="-"+u+"-"+t;
return true;}});return s;}}function c(s){return s.charAt(0).toUpperCase()+s.substr(1);}function k(u,v){for(var t=0,s=u.length;t<s;t++){if(v(u[t],t)){return true;
}}return false;}function i(u,w,t,v){var s=Math.abs(u-t);var B=Math.abs(w-v);var A=Math.sqrt(Math.pow(s,2)+Math.pow(B,2));return{x:s,y:B,z:A};}function f(t){var s=t.y/t.z;
var u=Math.acos(s);return 180/(Math.PI/u);}return b;});